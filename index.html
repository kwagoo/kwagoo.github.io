<html>
  <body>
    <h1>Please Share Your Location</h1>
    <button onclick="getLocation()">Share Location</button>

    <script>
      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(sendLocation);
        } else {
          alert("Geolocation is not supported by this browser.");
        }
      }

      function sendLocation(position) {
        const userId = new URLSearchParams(window.location.search).get('userId');
				const userkey = new URLSearchParams(window.location.search).get('userkey');
				const action = new URLSearchParams(window.location.search).get('action');
				const group = new URLSearchParams(window.location.search).get('group');
				const rId = new URLSearchParams(window.location.search).get('rId');

        //const userId = '11111';
				const url = 'https://emc.ngrok.app/webhook-test/c611df2a-59c3-4996-9789-0c45108a5631';

        fetch(url, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            userId: userId,
						userkey: userkey,
						action: action,
						group: group,
						rId: rId,
            latitude: position.coords.latitude,
            longitude: position.coords.longitude
          })
        })
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(error => console.error("Error:", error));
      }
    </script>
  </body>
</html>
